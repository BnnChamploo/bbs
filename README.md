# 班德尔密林 - 符文大陆里宇宙

一个专为**论坛体同人创作**设计的BBS系统，支持展示模式和编辑模式，方便作者创作拟真的论坛体作品。

## 🎯 项目定位

这是一个**创作工具**，不是真正的论坛：
- ✅ 数据存储在浏览器本地（localStorage）
- ✅ 英雄数据和板块数据是写死的（静态数据）
- ✅ 支持一键清除所有本地数据
- ✅ 每个用户的数据独立存储

## ✨ 功能特性

### 核心功能
- ✅ 用户注册和登录（默认密码：1234567）
- ✅ 自定义头像和用户名
- ✅ 段位系统（LOL段位：坚韧黑铁到最强王者）
- ✅ 头衔和身份系统
- ✅ 发帖和回复功能
- ✅ 匿名发帖/回复
- ✅ 自定义时间（瓦罗兰历）
- ✅ 地区显示（艾欧尼亚、德玛西亚等）
- ✅ 图片上传（转换为 base64）
- ✅ 点赞功能
- ✅ 用户排行榜

### 创作功能（编辑模式）
- ✅ **展示模式/编辑模式切换**
- ✅ **拖拽楼层排序**
- ✅ **编辑帖子内容**（标题、内容、用户、时间、地区等）
- ✅ **编辑回复内容**（内容、用户、时间、地区等）
- ✅ **自定义回复人名称**
- ✅ **自动填充**：选择用户时自动填充该用户上次回复的值
- ✅ **批量保存**：一键保存所有更改

### 板块系统
- ✅ **瓦罗兰广场** (plaza) - 主板块，包含：聊天灌水、学徒交流、出大事了·公告板、活动
- ✅ **八卦娱乐** (gossip) - 娱乐八卦专区，包含：约德尔大饭堂、偶像明星、爆破雷区、吃瓜码头、818
- ✅ **情感专区** (emotion) - 情感交流，包含：蘑菇树洞、恋爱分享、情感咨询、相亲角
- ✅ **生活市集** (life) - 功能性板块，包含：二手交易、招募队友、租赁、求助

## 🚀 快速开始

### 本地开发（纯前端模式）

1. **安装依赖**
```bash
cd client
npm install
```

2. **创建环境变量文件**
```bash
# 在 client 目录下创建 .env.local
echo "VITE_USE_LOCAL_STORAGE=true" > .env.local
```

3. **启动开发服务器**
```bash
npm run dev
```

4. **访问应用**
- 前端：http://localhost:5173
- 默认密码：1234567（所有用户）

### 本地开发（后端模式）

如果需要使用后端：

```bash
# 终端1：启动后端
cd server
npm install
node index.js

# 终端2：启动前端
cd client
# 删除或注释掉 .env.local 中的 VITE_USE_LOCAL_STORAGE
npm run dev
```


## 🎨 使用说明

### 展示模式（正常论坛模式）
1. 浏览帖子列表
2. 查看帖子详情
3. 发表回复（可以选择用户、设置匿名、自定义时间等）

### 编辑模式（创作模式）
1. 登录后，点击导航栏的"展示模式"按钮切换到"编辑模式"
2. 进入帖子详情页
3. 可以：
   - 编辑帖子信息
   - 拖拽回复楼层调整顺序
   - 编辑每个回复的内容
   - 选择不同的用户发表回复
   - 自定义回复人名称
   - 修改时间、地区、头衔、身份等信息
   - 删除回复
4. 点击"保存所有更改"保存修改

### 特色功能

- **自动填充**：在同一个帖子中，如果某个用户回复过，再次选择该用户时会自动填充上次回复的值（身份、头衔、地区、时间等）
- **自定义回复人**：回复时可以选择用户或自定义输入回复人名称
- **英雄账号**：使用英雄名称登录（如"阿狸"）会自动创建/登录该英雄账号

## 🔧 技术栈

### 前端
- React 18
- React Router
- Tailwind CSS
- Vite
- @dnd-kit（拖拽排序）
- ReactQuill（富文本编辑器）

### 后端（可选）
- Node.js + Express
- SQLite 数据库
- JWT 身份验证
- Multer 文件上传

### 数据存储
- **纯前端模式**：localStorage（浏览器本地存储）
- **后端模式**：SQLite 数据库

## 📁 项目结构

```
runeterra/
├── client/              # 前端应用
│   ├── src/
│   │   ├── components/  # React组件
│   │   ├── pages/      # 页面组件
│   │   ├── utils/      # 工具函数
│   │   │   ├── api.js           # API客户端
│   │   │   ├── apiLocal.js      # 本地API模拟（localStorage）
│   │   │   ├── localStorage.js  # 数据管理
│   │   │   ├── avatar.js        # 头像处理
│   │   │   └── image.js         # 图片处理
│   │   ├── data/       # 静态数据
│   │   │   ├── heroes.js        # 英雄数据（169个英雄）
│   │   │   └── categories.js    # 板块和地区数据
│   │   └── main.jsx    # 入口文件
│   ├── public/
│   │   ├── avatar/     # 英雄头像文件夹
│   │   └── 404.html    # GitHub Pages 路由处理
│   └── package.json
├── server/              # 后端服务器（可选）
│   ├── index.js        # 服务器主文件
│   └── package.json
└── README.md           # 项目说明
```

## 📝 重要说明

1. **默认密码**：所有用户的默认密码是 `1234567`
2. **自动注册**：如果用户不存在，使用默认密码登录会自动创建账号
3. **英雄账号**：使用英雄名称登录会自动创建/登录该英雄账号
4. **数据存储**：纯前端模式下，数据存储在浏览器 localStorage 中
5. **数据清除**：在个人资料页面可以一键清除所有数据
6. **图片上传**：纯前端模式下，图片会转换为 base64 存储（有大小限制）

## 🎯 创作建议

1. **先创建用户**：在注册页面创建各个英雄和角色的账号
2. **设置用户信息**：在个人资料页面设置每个用户的头像、段位、头衔、身份
3. **切换到编辑模式**：开始创作时切换到编辑模式
4. **创建帖子**：在编辑模式下创建帖子，可以手动填写所有信息
5. **添加回复**：在编辑模式下添加回复，可以自由选择用户、设置时间等
6. **调整顺序**：通过拖拽调整回复顺序
7. **保存更改**：完成编辑后保存所有更改
8. **切换到展示模式**：查看最终效果

## 📚 相关文档

- `功能说明.md` - 详细功能说明

## 🐛 常见问题

### Q: 数据丢失了怎么办？
A: 检查浏览器是否清除了 localStorage，或者使用了无痕模式。

### Q: 可以备份数据吗？
A: 可以使用浏览器控制台导出 localStorage 数据。

### Q: 图片上传失败？
A: 纯前端模式下，大图片会转换为 base64，可能超出 localStorage 限制。建议使用外部图床。

### Q: 如何切换回后端模式？
A: 删除或设置 `VITE_USE_LOCAL_STORAGE=false`，然后启动后端服务器。

## 📄 许可证

MIT
