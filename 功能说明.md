# 班德尔密林论坛 - 功能说明

## 🎯 项目定位

这是一个专为**论坛体同人创作**设计的BBS系统，支持展示模式和编辑模式，方便作者创作拟真的论坛体作品。

## ✨ 已实现功能

### 1. 板块系统
- ✅ **瓦罗兰广场** (plaza) - 主板块，包含：聊天灌水、学徒交流、出大事了·公告板、活动 🏛️
- ✅ **八卦娱乐** (gossip) - 娱乐八卦专区，包含：约德尔大饭堂、偶像明星、爆破雷区、吃瓜码头、818 🔥
- ✅ **情感专区** (emotion) - 情感交流，包含：蘑菇树洞、恋爱分享、情感咨询、相亲角 🌙
- ✅ **生活市集** (life) - 功能性板块，包含：二手交易、招募队友、租赁、求助 🗺️

### 2. 用户系统
- ✅ 用户注册和登录（默认密码：1234567）
- ✅ **自动注册**：使用默认密码登录不存在的用户会自动创建账号
- ✅ **英雄账号**：使用英雄名称登录（如"阿狸"）会自动创建/登录该英雄账号
- ✅ 自定义头像和用户名
- ✅ **段位系统**（LOL段位）：
  - 坚韧黑铁 (1)
  - 英勇黄铜 (2)
  - 不屈白银 (3)
  - 荣耀黄金 (4)
  - 华贵铂金 (5)
  - 流光翡翠 (6)
  - 璀璨钻石 (7)
  - 超凡大师 (8)
  - 傲世宗师 (9)
  - 最强王者 (10)
- ✅ **头衔系统**：每个用户/帖子可以设置头衔（如：九尾妖狐）
- ✅ **身份系统**：可以设置身份（如：版主）
- ✅ 用户名唯一性检查（不能重复，不能使用英雄名称）

### 3. 发帖功能
- ✅ 发帖时可以选择用户（从用户列表中选择）
- ✅ **匿名发帖**功能（匿名时头衔、身份自动清空）
- ✅ **自定义时间**（瓦罗兰新历）
- ✅ **地区显示**（艾欧尼亚、德玛西亚等）
- ✅ **图片上传**（支持多张，转换为 base64）
- ✅ 显示浏览量、点赞数、评论数
- ✅ 显示用户头像、用户名、段位、头衔、身份

### 4. 回复功能
- ✅ 回复时可以选择用户或**自定义输入回复人名称**
- ✅ **匿名回复**功能（匿名时头衔、身份自动清空）
- ✅ **自定义时间**（瓦罗兰新历）
- ✅ **地区显示**
- ✅ **图片上传**（支持多张，转换为 base64）
- ✅ 显示用户头像、用户名、段位、头衔、身份
- ✅ **自动填充**：在同一个帖子中，如果某个用户回复过，再次选择该用户时会自动填充上次回复的值（身份、头衔、地区、时间等）

### 5. 编辑模式（核心功能）
- ✅ **展示模式/编辑模式切换**（在导航栏切换）
- ✅ **拖拽楼层排序**（在编辑模式下可以拖拽回复顺序）
- ✅ **编辑帖子内容**：
  - 修改标题、内容
  - 选择/更改发帖人
  - 设置匿名
  - 修改时间、地区
  - 修改头衔、身份
  - 修改浏览量、点赞数、回复数
- ✅ **编辑回复内容**：
  - 修改回复内容
  - 选择/更改回复人（支持自定义用户名）
  - 设置匿名
  - 修改时间、地区
  - 修改头衔、身份
  - 修改楼层数
  - 删除回复
- ✅ **批量保存**：一键保存所有更改

### 6. 显示功能
- ✅ 帖子列表显示所有信息（头像、用户名、段位、头衔、身份、地区、时间等）
- ✅ 帖子详情页完整显示
- ✅ 回复列表完整显示（按楼层数正确排序）
- ✅ 瓦罗兰新历时间显示
- ✅ 地区IP显示
- ✅ 模块标签固定在一行（标题过长时标签不换行）

### 7. 其他功能
- ✅ 点赞功能
- ✅ 图片预览和删除
- ✅ 响应式设计
- ✅ 一键清除数据（保留用户数据或清除所有数据）

## 🎨 使用说明

### 展示模式（正常论坛模式）
1. 浏览帖子列表
2. 查看帖子详情
3. 发表回复（可以选择用户、设置匿名、自定义时间等）

### 编辑模式（创作模式）
1. 登录后，点击导航栏的"展示模式"按钮切换到"编辑模式"
2. 进入帖子详情页
3. 可以：
   - 编辑帖子信息
   - 拖拽回复楼层调整顺序
   - 编辑每个回复的内容
   - 选择不同的用户发表回复
   - 自定义输入回复人名称
   - 修改时间、地区、头衔、身份等信息
   - 删除回复
4. 点击"保存所有更改"保存修改

### 发帖时的字段说明
- **发帖人**：从用户列表中选择已存在的用户
- **匿名**：勾选后显示为"匿名用户"，头衔和身份自动清空
- **时间**：留空使用当前时间，或填写瓦罗兰新历时间（如：11年11月11日11时11分）
- **地区**：选择英雄所在地区（艾欧尼亚、德玛西亚等）
- **头衔**：填写英雄头衔（如：九尾妖狐、暗影之拳等）
- **身份**：填写身份（如：版主、管理员等）

### 回复时的字段说明
- **回复人**：可以选择用户或自定义输入回复人名称
- **自动填充**：如果该用户在该帖子中回复过，会自动填充上次回复的值
- **匿名**：勾选后显示为"匿名用户"，头衔和身份自动清空
- **时间**：留空使用当前时间，或填写瓦罗兰新历时间
- **地区**：选择地区
- **头衔**：填写头衔
- **身份**：填写身份

## 📝 创作建议

1. **先创建用户**：在注册页面创建各个英雄和角色的账号
2. **设置用户信息**：在个人资料页面设置每个用户的头像、段位、头衔、身份
3. **切换到编辑模式**：开始创作时切换到编辑模式
4. **创建帖子**：在编辑模式下创建帖子，可以手动填写所有信息
5. **添加回复**：在编辑模式下添加回复，可以自由选择用户、设置时间等
6. **利用自动填充**：选择已回复过的用户时，会自动填充上次的值，提高效率
7. **调整顺序**：通过拖拽调整回复顺序
8. **保存更改**：完成编辑后保存所有更改
9. **切换到展示模式**：查看最终效果

## 🔧 技术实现

- **前端**：React + Vite + Tailwind CSS
- **拖拽**：@dnd-kit
- **富文本编辑**：ReactQuill
- **数据存储**：localStorage（纯前端模式）或 SQLite（后端模式）
- **图片处理**：base64 编码（纯前端模式）

## 📌 注意事项

1. 编辑模式需要登录才能使用
2. 图片上传限制：单张最大 5MB（纯前端模式下转换为 base64）
3. 匿名发帖/回复时，头衔和身份会被自动清空
4. 自定义时间格式可以自由填写，建议使用"瓦罗兰历 YY-MM-DD HH:mm"格式
5. 用户名不能重复，不能使用英雄名称
6. 默认密码：1234567（所有用户）
7. 楼层数按 `sort_order`、`floor_number`、`created_at` 排序

## 🎉 特色功能

- **拟真度高**：完全模拟真实论坛的显示效果
- **创作友好**：编辑模式让创作论坛体变得简单
- **信息丰富**：支持显示头像、段位、头衔、身份、地区、时间等完整信息
- **灵活编辑**：可以自由调整楼层顺序、修改内容、选择用户
- **自动填充**：提高创作效率
- **自定义回复人**：支持输入任意名称作为回复人

祝你创作愉快！欢迎来到班德尔密林！✨
